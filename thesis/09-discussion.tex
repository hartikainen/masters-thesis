% TODO
% Goals
%   - network processing system ok, clusteri koostuisi useammasta noodista
%   - addressed entity -> kutsutaan nodeksi
%   - node ihan hyva bladesta, processing element viittaa yhteen ytimeen
%   - dipassa NPU, blade kannattaa yhtenäistää
%   - kannattaa luoda pikkasen priorisoinnin kuvaa:
%     - tilanne on se että tavoitteet on kahtalaiset
%     - NPU ymmärryksellä on oma arvonsa
%     - Simuloinnin ymmärryksellä on oma arvonsa
%     - Latenssipäämäärät on subgoals, arvo tulee yo. goalien kautta
%     - Se että ymmärretään delay-rakennetta palvelee molempia:
%       - hajautetun verkkoprosessoinnin ymmärrystä, sekä simuloinnin ymmärrystä
%       - Kysymys on että mitkä arvot? Kaikkea pystyy tekee, mutta ei ehdi
%       - Mikä on tärkeää, miten/mitkä mittaukset tukee molempia päämääriä
%       - Jos mittaus on työläs ja tukee vain toista, kannattaa jättää tekemättä

\chapter{Discussion}
\label{chapter:discussion}
% \todo[inline]{TODO: this chapter is still undone!}

This chapter discusses the results of our work. First, we present the challenges within the topic of the thesis. The discoveries section discusses the findings made during the thesis. In related work, we summarize the related work on the field of our study. Finally, in the future work section, we propose few possible future directions on our topic of research.

\section{Challenges}
% JUSSI
% Yleisesti ongelma, eli fogi ja cloudi vaatii tehokasta pakettiprosessointia -> performanssianalyysi tärkeetä -> koska pakettisysteemit ja MPSoCit on vaikeita hardware-tason systeemejä niin analyyttinen analyysi ja mittaaminen usein vaikeeta -> simulaatio tärkeetä

% Ja että fog/cloud jmät IoT skaalassa ovat monimutkaisia. Niin monimutkaisia, että niistä ei usein voi rakentaa protoa ennen jmän deploymenttiä.

% Mallinnuksessa sopiva abstraktiotaso keskeistä. Liian tarkat abstraktiot hidastavat simulaatiota, kun taas liian korkeat antavat summittaisia tuloksia. Lisäksi käytettävyys, mallinuksen "nopeus", jne..

% Simulaatiota varten täytyy pystyä mallintamaan tehokkaammin monimutkasia resursseja, kuten schedulereita
% Simulaatioiden koko kasvaa -> tarvitaan skaalaautuvia simulaattoreita (parallelisoituminen)
% Tämä johtuu tietenkin mallinnettavien jmien kompleksisuuden kasvusta.

Today's packet processing system face an ever-increasing number of packets requiring more and more complex processing. Short development cycles and fast revisioning of the systems have become necessity, as the vendors face fast changes in technology, dynamic customer requirements, and pressure for time-to-market. To answer these requirements, especially with the tightening energy limitations, the vendors are searching for new packet processing solutions. Network processing units are a type of network processors, build as a multiprocessor system-on-chips (MPSoC's). Network processing units are optimized for high-speed network packet processing at wire-speeds of multi-Gbps, while at the same time enjoying the generic characteristics similar to general purpose central processing units.

Performance analysis of network processing units is difficult, due to complex non-deterministic behavior and complex hardware and software interactions of the MPSoC devices, and the dynamic nature of the input data streams.

The complexity of today's systems, especially in the scale of cloud and fog computing, is growing to a level where prototyping is not possible.

Modeling is an important tool for the performance analysis of MPSoC systems. The packet processing systems are, in essence, queuing systems. Queue and resource networks are widely studied concepts, often used for packet processing problems. However, the complex low level interactions between the components of MPSoC's make the traditional queue concepts insufficient, while at the same time the exact measurements may be unsuitable, especially in the early stage of the system development.

One way to address this problem, is to extend the resource networks with more flexible queue discplines and methods for modeling parallelism, to correctly mimic the behavior of complex MPSoC based packet processing systems. More complex queue disciplines and MPSoC behavior force the use of simulation methods to execute the models.

Correct abstaction level is one of the key elements of modeling. Too detailed models are intractable and require time consuming simulations, while too high level abstractions hide the sought characteristics of the system, resulting in inadequate results.

In order to understand the behavior of MPSoCs, more detailed tracing methods are required. While simulation enables real time tracing of the model execution, on a fine-grained detail, the implementation of such tracing mechanisms in a scale challenging.

Also, the

% The performance of simulation execution on parallel platforms is a question of special importance. The future manycore platforms are constantly evolving into a direction where they soon contain thousands, if not millions of cores. With regard to parallel simulation, two main problems arise. First, how to model and simulate such manycore systems? And second, how to parallelize the execution of simulations to benefit from the future manycore platforms?

% \todo[inline]{Simulation tracing?}
% \todo[inline]{Parallel simulation is problematic}


\section{Discoveries}
% Discoveries
% PSE:llä voidaan mallintaa vaikeampiakin hardware interactioista suht intuitiivisesti (ja mahdollisesti myös tehokkaasti)
% Valitettavaa, mutta mulla ei oikeestaan tuu mitään sen suurempia discoveryjä mieleen tän työn tuloksena...
% Tai että laajentamalla perinteistä resurssiverkkokonseptia globaalilla skedulointi plugarilla, sillä voidaan mallintaa task based processinkia hardware scheduloiduilla alustoilla, tms..

The thesis shows that the resource network paradigm, extended with custom queuing disciplines and support for modeling task parallelism, seem be adequate tool for modeling complex hardware and software interactions of a modern MPSoC network processing systems. Performance Simulation Environment enables efficient simulation MPSoC system on a meaningful abstraction level. It decouples the hardware and software presentation of the models, enabling intuitive, and fast modeling.

The usability extended plugin functionality, and the customized queueing disciplines, does limit to the modeling of network processing units. Various systems, not only in the field of computer science, can be modeled using the extended resource network paradigm. Based on the feedback, and our own observations during the development of PSE, we believe that the traditional resource network concept will be an intriguing tool for modeling and simulation of, above all but not limited to, task based processing on hardware scheduled manycore platforms.

% \todo[inline]{Resource network models, extended with more complex queuing disciplines and support for modeling task parallelism, seem to be adequate for modeling complex hardware and software interactions of a modern MPSoC network processing systems}
% \todo[inline]{
% PSE provides an efficient way of simulating MPSoC systems.
% PSE decouples the hardware and software presentation of the models, enabling intuitive, and fast modeling}

\section{Related Work}
% Related Work
% Tähän varmaan ois kiva kaivaa jotain esim. EPC tai vastaavia simulaatiojuttuja esimerkiks?
% Lisäks ajattelin esitellä erilaisia simulaattoreita samaan tyyliin kun sunkin related workissa
% Jotain jos löytyy järjestelmien mallinnuksesta niin hyvä ois.

 % \todo[inline]{add more stuff on system simulation?}

Simulation is a widely used method in performance analysis of datacenter components. There exists multitude of research in the field of cloud computing and simulation. Various methods, tools, and approaches have been implemented in attempt to balance between competing goals, and cope with a specific subset of the problem space.

Cloud datacenter simulators are used for simulation the critical parts of cloud datacenter. CloudSim~\cite{Calheiros:2011:Cloudsim}, for example, is a toolset for modeling and simulation of cloud computing infrastructure and application services. CloudSim can be used for simulating large-scale datacenters, virtualized server hosts with customizable provisioning policies, energy-aware computational resources, data center network topologies and message-passing applications. Various different projects extend the CloudSim API for more detailed performance analysis of different parts fo the cloud system: CloudSimEx enables simulation of MapReduce jobs and CloudAnalyst~\cite{Wickremasinghe:2010:CloudAnalyst} enables simulation of large-scale cloud applications in terms of geographic distribution.

When moving towards the fog, the performance of mobile network technologies becomes important. In~\cite{Ikuno:2010:LTE}, Ikuno et al. present a Matlab based simulation software for the system level LTE networks.

\section{Future Work}
% JUSSI
% Virtualisaation simuloiminen? Tää vaikuttaa mun mielestä tärkeeltä mutta ne oikein keksi miten tota pitäis purkaa
% Vois tietty olla future workissä. Jotain tyyliin: virtualisointien (laskenta, tiedonsiirto, yms) mallinnus vaatisi lisää tasoja resurssiverkkoparadigmaan.

% Varmaan jotain yleisesti fogista ja vastaavasta? Esim. että toi meidän systeemi vois olla osa sellasta experimenttiä josta puhuttiin alkuvuodesta
% Ehkä tänne ennemmin tuo virtualisointi asia, ja jos jotain vastaavaa löytyy kanssa.
% Ja jotain yleisesti yhä monimutkaistuvista järjestelmistä, ja järjestelmien järjestelmistä. Internet kokoluokan ongelmista.

% \todo[inline]{Modeling virtualized systems? Modeling of virutalization (computing, communication, etc..) Requires more levels to the resource network paradigm.}

There exist several directions for future research around the topic of this thesis.

As we have shown in this work, the resource network methodology, extended with customized queue disciplines and support for modeling parallel systems, can be used to model more modern MPSoC based network processing units. The flexibility of PSE, and resource networks, enable simulation of large-scale systems on many different parts of the cloud computing context. However, there are certain limitations with the tool as well.

% \todo[]{task/event parallelism, generally hardware scheduled manycoresystems?}

Simulation of larger systems, such as the network processing unit presented in this work, in larger scale, let alone full scale datacenter networks or complex IoT applications that consist large number of different components, with the current implementation of PSE are not feasible. This is mainly due to the inefficient implementation of the threads executing tasks, and the memory systems. The threads are fairly heavy structures to handle the tasks, in the context of large-scale simulations. These could, for example, be replaced with similar structures as Akka frameworks' actors.

Parallelization of the simulator is one of the most important steps towards efficient, massive scale, simulations. This is a widely researched topic in itself, and faces multiple challenges, not only the ones faced with parallelization in general, but also the simulators' nature makes the problem non-trivial.


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "thesis-hartikainen"
%%% End:
